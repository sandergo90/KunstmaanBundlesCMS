{% set tabs = {
'legal_privacy_policy': 'legal_privacy_policy',
'legal_cookie_preferences': 'legal_cookie_preferences',
'legal_contact': 'legal_contact'
} %}

{% for key, tab in tabs %}
    {% if tab == node.internalName %}
        {% set tabs = tabs|merge({(tab): node}) %}
    {% else %}
        {% set tabs = tabs|merge({(tab): get_node_by_internal_name(tab, app.request.locale)}) %}
    {% endif %}
{% endfor %}

<div class="legal-container">
    <div class="legal-tabs-wrapper">
        {% for key,tab in tabs %}
            <input class="legal-state" type="radio" name="tabs-state" id="tab-{{ key }}"{% if key == node.internalName %} checked{% endif %}/>
        {% endfor %}

        <div class="legal-tabs">
            {% for key,tab in tabs %}
                <label for="tab-{{ key }}" id="tab-{{ key }}-label" class="legal-tab">
                    {{ tab.nodeTranslation(app.request.locale).title }}
                </label>
            {% endfor %}

            {% for key,tab in tabs %}
                {% set pageToRender = get_page_by_node_translation(tab.nodeTranslation(app.request.locale)) %}
                <div id="tab-{{ key }}-panel" class="panel{% if key == node.internalName %} active{% endif %}">
                    {% include '<%= bundle.name %>:Pages:LegalPage/_content.html.twig' with {'page': pageToRender} %}
                </div>
            {% endfor %}
        </div>
    </div>
</div>
