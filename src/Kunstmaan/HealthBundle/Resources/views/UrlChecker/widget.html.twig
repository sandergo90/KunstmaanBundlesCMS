{% set route_params = app.request.attributes.get('_route_params') %}
{% if app.request.query.has('id') %}
    {% set route_params = route_params|merge({'id': app.request.query.get('id')}) %}
{% endif %}

{# Pagination #}
{% if pagerfanta.haveToPaginate() %}
    {{ pagerfanta(pagerfanta, 'twitter_bootstrap_translated', {'routeName': 'kunstmaan_health', 'routeParams': route_params}) }}
{% endif %}

{% set nrResults = pagerfanta.getNbResults() %}
{% if nrResults > 0 %}
    <div class="table-responsive">
        <table class="table table-striped table-bordered">
            <caption>{{ 'settings.health.results' | trans({'%count%': nrResults}) }}</caption>
            <thead>
            <tr>
                <th>{{ "settings.health.url" | trans }}</th>
                <th>{{ "settings.health.extra" | trans }}</th>

                <!-- Actions -->
                <th class="table__actions">
                    {{ 'form.actions'|trans }}
                </th>
            </tr>
            </thead>
            <tbody>
            {% for link in pagerfanta.currentPageResults %}
                <tr>
                    <td>
                        {{ link.url | raw }}
                    </td>
                    <td>
                        {{ link.extra | raw }}
                    </td>

                    <!-- Actions -->
                    <td class="table__actions">
                        <a href="{{ path(link.route, link.routeParams) }}" class="link--text table__actions__item" title="{{ 'settings.health.correct' | trans }}">
                            <i class="fa fa-pencil-square-o"></i>
                        </a>
                    </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
    {# Pagination #}
    {% if pagerfanta.haveToPaginate() %}
        {{ pagerfanta(pagerfanta, 'twitter_bootstrap_translated', {'routeName': 'kunstmaan_health', 'routeParams': route_params}) }}
    {% endif %}
{% endif %}
